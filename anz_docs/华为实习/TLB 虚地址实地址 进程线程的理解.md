**虚拟内存概念**
在用户的视角里，每个进程都有自己独立的地址空间，A进程的4GB和B进程4GB是完全独立不相关的，他们看到的都是操作系统虚拟出来的地址空间。但是呢，虚拟地址最终还是要落在实际内存的物理地址上进行操作的。操作系统就会通过页表的机制来实现进程的虚拟地址到物理地址的翻译工作。其中每一页的大小都是固定的。

关于TLB的好文：
[进程切换分析（2）：TLB处理-腾讯云开发者社区-腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/2431036)
![[Pasted image 20240628100814.png|600]]
kernel space所有进程共享，但是对于A和B进程，有各自独立的user space，同样一个虚拟地址X，可能在A地址空间翻译成Pa，在B中翻译为Pb。
进程切换会导致Flush掉所有的TLB。
所以引入了ASID（address space ID)，匹配会匹配VA+ASID，进程切换添加B的映射关系就行了。
