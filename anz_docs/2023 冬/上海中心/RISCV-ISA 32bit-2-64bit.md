	imafdc

|     |     | 
| --- | --- |

| inst-type fomat | 32bit instruction |     | 64bit instruction<br>(in addition to 32 bit) | description                                                                                                                                                                    | note                                 |
| --------------- | ----------------- | --- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------ |
| I.U             |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | LUI               |     |                                              | x[rd] = {imm,12'b0}                                                                                                                                                            |                                      |
|                 | AUIPC             |     |                                              | x[rd] = pc+{imm[31:12],12'b0}                                                                                                                                                  |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
| I.J             | JAL               |     |                                              | x[rd]=pc+4;pc+=sext(offset)                                                                                                                                                    | offset={imm[20:1],1'b0},范围：+-1MiB |
| I.I             | JALR              |     |                                              | t=pc+4;pc=(x[rs1]+sext(offset))&(~ 'b1); x[rd]=t                                                                                                                               |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
| I.B             |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | BEQ               |     |                                              | if(rs1\==rs2)pc+=sext(offset)                                                                                                                                                  |                                      |
|                 | BNE               |     |                                              | if(rs1 != rs2)pc+=sext(offset)                                                                                                                                                 |                                      |
|                 | BLT               |     |                                              | if(rs1 <s rs2)pc+=sext(offset)                                                                                                                                                 |                                      |
|                 | BGE               |     |                                              | if(rs1 >=s rs2)pc+=sext(offset)                                                                                                                                                |                                      |
|                 | BLTU              |     |                                              | if(rs1 <u rs2)pc+=sext(offset)                                                                                                                                                 |                                      |
|                 | BGEU              |     |                                              | if(rs1 >=u rs2)pc+=sext(offset)                                                                                                                                                |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
| I.I             |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | LB                |     |                                              | x[rd]=sext(M[x[rs1]+sext(offset)][7:0])                                                                                                                                        |                                      |
|                 | LH                |     |                                              | x[rd]=sext(M[x[rs1]+sext(offset)][15:0])                                                                                                                                       |                                      |
|                 | LW                |     |                                              | x[rd]=sext(M[x[rs1]+sext(offset)][31:0])                                                                                                                                       |                                      |
|                 |                   |     | LD                                           | x[rd]=M[x[rs1]+sext(offset)][63:0]                                                                                                                                             |                                      |
|                 | LBU               |     |                                              | x[rd]=M[x[rs1]+sext(offset)][7:0]                                                                                                                                              |                                      |
|                 | LHU               |     |                                              | x[rd]=M[x[rs1]+sext(offset)][15:0]                                                                                                                                             |                                      |
|                 |                   |     | LWU                                          | x[rd]=M[x[rs1]+sext(offset)][31:0]                                                                                                                                             |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
| I.S             |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | SB                |     |                                              | M[x[rs1]+sext(offset)]=x[rs2][7:0]                                                                                                                                             |                                      |
|                 | SH                |     |                                              | M[x[rs1]+sext(offset)]=x[rs2][15:0]                                                                                                                                            |                                      |
|                 | SW                |     |                                              | M[x[rs1]+sext(offset)]=x[rs2][31:0]                                                                                                                                            |                                      |
|                 |                   |     | SD                                           | M[x[rs1]+sext(offset)]=x[rs2][63:0]                                                                                                                                            |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
| I.I             |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | ADDI              |     |                                              | x[rd]=x[rs1] + sext(imm)                                                                                                                                                       |                                      |
|                 |                   |     | ADDIW                                        | x[rd]=sext((x[rs1] + sext(imm))[31:0])                                                                                                                                         |                                      |
|                 | SLTI              |     |                                              | x[rd]=x[rs1] <s sext(imm)                                                                                                                                                      |                                      |
|                 | SLTIU             |     |                                              | x[rd]=x[rs1] <u sext(imm)                                                                                                                                                      |                                      |
|                 | XORI              |     |                                              | x[rd]=x[rs1] ^ sext(imm)                                                                                                                                                       |                                      |
|                 | ORI               |     |                                              | x[rd]=x[rs1] \| sext(imm)                                                                                                                                                      |                                      |
|                 | ANDI              |     |                                              | x[rd]=x[rs1] & sext(imm)                                                                                                                                                       |                                      |
|                 | SLLI              |     |                                              | x[rd]=x[rs1] << shamt                                                                                                                                                          |                                      |
|                 | SRLI              |     |                                              | x[rd]=x[rs1] >> shamt                                                                                                                                                          |                                      |
|                 | SRAI              |     |                                              | x[rd]=x[rs1] >>> shamt                                                                                                                                                         |                                      |
|                 |                   |     | SLLIW                                        | x[rd]=sext((x[rs1] << shamt)[31:0])                                                                                                                                            |                                      |
|                 |                   |     | SRLIW                                        | x[rd]=sext((x[rs1] >> shamt)[31:0])                                                                                                                                            |                                      |
|                 |                   |     | SRAIW                                        | x[rd]=sext((x[rs1] >>> shamt)[31:0])                                                                                                                                           |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
| I.R             |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | ADD               |     |                                              | x[rd]=x[rs1] + x[rs2]                                                                                                                                                          |                                      |
|                 | SUB               |     |                                              | x[rd]=x[rs1] - x[rs2]                                                                                                                                                          |                                      |
|                 |                   |     | ADDW                                         | x[rd]=sext((x[rs1] + x[rs2])[31:0])                                                                                                                                            |                                      |
|                 |                   |     | SUBW                                         | x[rd]=sext((x[rs1] - x[rs2])[31:0])                                                                                                                                            |                                      |
|                 | SLL               |     |                                              | x[rd]=x[rs1] << x[rs2][5:0]                                                                                                                                                    |                                      |
|                 | SLT               |     |                                              | x[rd]=x[rs1] <s x[rs2]                                                                                                                                                         |                                      |
|                 | SLTU              |     |                                              | x[rd]=x[rs1] <u x[rs2]                                                                                                                                                         |                                      |
|                 | XOR               |     |                                              | x[rd]=x[rs1] ^ x[rs2]                                                                                                                                                          |                                      |
|                 | SRL               |     |                                              | x[rd]=x[rs1] >> x[rs2][5:0]                                                                                                                                                    |                                      |
|                 | SRA               |     |                                              | x[rd]=x[rs1] >>> x[rs2][5:0]                                                                                                                                                   |                                      |
|                 |                   |     | SLLW                                         | x[rd]=sext((x[rs1] << x[rs2][4:0])[31:0])                                                                                                                                      |                                      |
|                 |                   |     | SRLW                                         | x[rd]=sext(x[rs1][31:0] >> x[rs2][4:0])                                                                                                                                        |                                      |
|                 |                   |     | SRAW                                         | x[rd]=sext(x[rs1][31:0] >>> x[rs2][4:0])                                                                                                                                       |                                      |
|                 | OR                |     |                                              | x[rd]=x[rs1] \| x[rs2]                                                                                                                                                         |                                      |
|                 | AND               |     |                                              | x[rd]=x[rs1] & x[rs2][5:0]                                                                                                                                                     |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | FENCE             |     |                                              | 同步内存和IO                                                                                                                                                                   |                                      |
|                 | ECALL             |     |                                              | 同步指令流                                                                                                                                                                     |                                      |
|                 | EBREAK            |     |                                              | 环境断点                                                                                                                                                                       |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
| M               |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | MUL               |     |                                              | x[rd] = (sext(x[rs1]) * sext(x[rs2]))[63:0]                                                                                                                                    |                                      |
|                 |                   |     | MULW                                         | x[rd] = (sext(x[rs1]) * sext(x[rs2]))[31:0]                                                                                                                                    |                                      |
|                 | MULH              |     |                                              | x[rd] = (sext(x[rs1]) * sext(x[rs2]))[127:64]                                                                                                                                  |                                      |
|                 | MULHSU            |     |                                              | x[rd] = (sext(x[rs1]) * u(x[rs2]))[127:64]                                                                                                                                     |                                      |
|                 | MULHU             |     |                                              | x[rd] = (u(x[rs1]) * u(x[rs2]))[127:64]                                                                                                                                        |                                      |
|                 | DIV               |     |                                              | x[rd] = sext(x[rs1]) / sext(x[rs2])                                                                                                                                            |                                      |
|                 | DIVU              |     |                                              | x[rd] = u(x[rs1]) / u(x[rs2])                                                                                                                                                  |                                      |
|                 |                   |     | DIVW                                         | x[rd] = sext(sext(x[rs1][31:0]) / sext(x[rs2][31:0]))                                                                                                                          |                                      |
|                 |                   |     | DIVUW                                        | x[rd] = sext(u(x[rs1][31:0]) / u(x[rs2][31:0]))                                                                                                                                |                                      |
|                 | REM               |     |                                              | x[rd] = sext(x[rs1]) % sext(x[rs2])                                                                                                                                            |                                      |
|                 | REMU              |     |                                              | x[rd] = u(x[rs1]) % u(x[rs2])                                                                                                                                                  |                                      |
|                 |                   |     | REMW                                         | x[rd] = sext(sext(x[rs1][31:0]) % sext(x[rs2][31:0]))                                                                                                                          |                                      |
|                 |                   |     | REMUW                                        | x[rd] = sext(u(x[rs1][31:0]) % u(x[rs2][31:0]))                                                                                                                                |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 |                   |     |                                              |                                                                                                                                                                                |                                      |
| A               |                   |     |                                              |                                                                                                                                                                                |                                      |
|                 | LR.W              |     |                                              | x[rd] = sext(M[rs1]), reservation set                                                                                                                                          |                                      |
|                 | SC.W              |     |                                              | if the reservation valid & contains the bytes being written: <br>M[rs1] = rs2，x[rd] = 0 <br> else：<br> x[rd] = noneZero<br><br>invalidates any reservation held by this hart |                                      |
|                 | AMOSWAP.W         |     |                                              | x[rd] = sext(M[rs1]), t = x[rs2], M[rs1] = t, x[rs2] = x[rd]                                                                                                                   |                                      |
|                 | AMOADD.W          |     |                                              | x[rd] = sext(M[rs1]), M[rs1] = x[rd] + x[rs2]                                                                                                                                  |                                      |
|                 | AMOXOR.W          |     |                                              | x[rd] = sext(M[rs1]), M[rs1] = x[rd] ^ x[rs2]                                                                                                                                  |                                      |
|                 | AMOAND.W          |     |                                              | x[rd] = sext(M[rs1]), M[rs1] = x[rd] & x[rs2]                                                                                                                                  |                                      |
|                 | AMOOR.W           |     |                                              | x[rd] = sext(M[rs1]), M[rs1] = x[rd] \| x[rs2]                                                                                                                                 |                                      |
|                 | AMOMIN.W          |     |                                              | x[rd] = sext(M[rs1]), M[rs1] = x[rd] min(s) x[rs2]                                                                                                                             |                                      |
|                 | AMOMAX.W          |     |                                              | x[rd] = sext(M[rs1]), M[rs1] = x[rd] max(s) x[rs2]                                                                                                                             |                                      |
|                 | AMOMINU.W         |     |                                              | x[rd] = sext(M[rs1]), M[rs1] = x[rd] min(u) x[rs2]                                                                                                                             |                                      |
|                 | AMOMAXU.W         |     |                                              | x[rd] = sext(M[rs1]), M[rs1] = x[rd] max(u) x[rs2]                                                                                                                             |                                      |
|                 |                   |     | LR.D                                         | x[rd] = M[rs1], reservation set                                                                                                                                                |                                      |
|                 |                   |     | SC.D                                         | 类似SC.W                                                                                                                                                                       |                                      |
|                 |                   |     | AMOSWAP.D                                    | x[rd] = M[rs1], t = x[rs2], M[rs1] = t, x[rs2] = x[rd]                                                                                                                         |                                      |
|                 |                   |     | AMOADD.D                                     | x[rd] = M[rs1], M[rs1] = x[rd] + x[rs2]                                                                                                                                        |                                      |
|                 |                   |     | AMOXOR.D                                     | x[rd] = M[rs1], M[rs1] = x[rd] ^ x[rs2]                                                                                                                                        |                                      |
|                 |                   |     | AMOAND.D                                     | x[rd] = M[rs1], M[rs1] = x[rd] & x[rs2]                                                                                                                                        |                                      |
|                 |                   |     | AMOOR.D                                      | x[rd] = M[rs1], M[rs1] = x[rd] \| x[rs2]                                                                                                                                       |                                      |
|                 |                   |     | AMOMIN.D                                     | x[rd] = M[rs1], M[rs1] = x[rd] min(s) x[rs2]                                                                                                                                   |                                      |
|                 |                   |     | AMOMAX.D                                     | x[rd] = M[rs1], M[rs1] = x[rd] max(s) x[rs2]                                                                                                                                   |                                      |
|                 |                   |     | AMOMINU.D                                    | x[rd] = M[rs1], M[rs1] = x[rd] min(u) x[rs2]                                                                                                                                   |                                      |
|                 |                   |     | AMOMAXU.D                                    | x[rd] = M[rs1], M[rs1] = x[rd] max(u) x[rs2]                                                                                                                                   |                                      |
