### 11.27
发现不能给每个预取器设置阈值，应该根据每次发出的预取请求数量设置

### 11.28
发现有些预取就是精度低，那就不应该预取呀，但是最后发现总的精度又很高，说明要么是训练的时候长度不够，要么里面有一些cacheline本身就带着hit，根本不算发出去的预取
**决定试试剔除HIT的，先把训练的块放入cache.h，然后MSHR中没merge才放入**
取舍：meatdata不仅要存储是哪个预取器发出来的，还要预取器发出来的第几个，即使这样也不完美，因为预取器的第几个是动态变化的，前面有可能就要删除。两种方案：预取记录不删除，导致变长；预取记录删除，更改uint_32t metadata变为class，改动太大。最后：就认为暂时可能一个region只会存在一个在训练的途中把，所有有这个entry的都删除（近似）
**剔除hit解决成功**,在这里不要过度纠结，有的会没try_hit就弄导致找不到，有的会重复发两遍，两遍由后面一个load全部剔除导致找不到，不用纠结。

### 12.2
发现其实1KB会猛发，感觉没必要，应该设置一个区域如果已经有很多相同预取就不要重复发预取了。

### 12.5
先改0-8分级制度，再改conf制度，小于0.4直接置0

| 300+    | 0.95 |
| ------- | ---- |
| 200-300 | 0.9  |
| 100-200 | 0.9  |
| 80-100  | 0.9  |
| 60-80   | 0.83 |
| 40-60   | 0.75 |
| 30-40   | 0.7  |
| 20-30   | 0.6  |
| 15-20   | 0.57 |
|         |      |
### 12.10
应该用ratio更直观的看，设置ratio_history初值0.9比较合理，因为第一次还是建议发送的，里面有一个问题是，pc&offset找到了多个entry，怎么取ratio，决定取他们的平均值了，并且history_num也取平均值，那就是说history_num = 0，1，2都是取ratio_history的平均和ratio_

### 12.16
梳理一下几个机制
1. 第一次预取不发出，只做虚拟的训练
2. 在访问到mshr的时候才插入，fill回来一个就清除
3. 选择可以选ratio_num也可以选ratio，看
4. 选择看多长



